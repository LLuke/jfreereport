<!-- An ANT build file for JFreeReport -->

<!-- This file builds a monolithic Jar file of all classes (Classic build). -->

<project name="jfreereport" default="all" basedir="..">

  <target name="init">
    <dirname property="antfile.dir" file="${ant.file}"/>
    <ant antfile="${antfile.dir}/build-core.xml" target="init"/>
    <property file="${antfile.dir}/build.properties"/>

  </target>

  <target name="compile" depends="init">
    <description>
      Compiles all classes and creates the jfreereport.jar file.
    </description>

    <!-- create a temp build directory -->
    <mkdir dir="build"/>

    <!-- compile the source -->
    <javac srcdir="source"
      destdir="build"
      deprecation="${build.deprecation}" debug="${build.debug}" optimize="${build.optimize}" target="${build.target}">
      <exclude name="org/jfree/report/demo/**"/>
      <classpath>
        <pathelement location="${libdir}/${jcommon-jar-file}"/>
        <pathelement location="${libdir}/${jcommon-xml-jar-file}"/>
        <pathelement location="${libdir}/${pixie-jar-file}"/>
        <pathelement location="${libdir}/${beanshell-jar-file}"/>
        <pathelement location="${libdir}/${bsf-jar-file}"/>
        <pathelement location="${libdir}/${jaxp-jar-file}"/>
        <pathelement location="${libdir}/${itext-jar-file}"/>
        <pathelement location="${libdir}/${libfonts-jar-file}"/>
        <pathelement location="${libdir}/${jakarta-poi-jar-file}"/>
      </classpath>
    </javac>

    <antcall target="copy-resources" inheritAll="true"/>

    <!-- make the jar -->
    <jar jarfile="${jfreereport-all-jar-file}" 
      basedir="build">
      <manifest>
        <attribute name="Class-Path"
          value="${manifest-lib-prefix}${jcommon-jar-file} ${manifest-lib-prefix}${pixie-jar-file} ${manifest-lib-prefix}${bsf-jar-file} ${manifest-lib-prefix}${beanshell-jar-file} ${manifest-lib-prefix}${jaxp-jar-file} ${manifest-lib-prefix}${itext-jar-file} ${manifest-lib-prefix}${jakarta-poi-jar-file}"/>
      </manifest>
    </jar>

    <!-- delete the temp directory -->
    <delete dir="build"/>
  </target>

  <target name="copy-resources">
    <dirname property="antfile.dir" file="${ant.file}"/>
    <ant antfile="${antfile.dir}/build-core.xml" target="copy-resources"/>
    <ant antfile="${antfile.dir}/build-misc.xml" target="copy-resources"/>
    <ant antfile="${antfile.dir}/build-output-misc.xml" target="copy-resources"/>
    <ant antfile="${antfile.dir}/build-output-table.xml" target="copy-resources"/>
    <ant antfile="${antfile.dir}/build-output-pageable.xml" target="copy-resources"/>
    <ant antfile="${antfile.dir}/build-parser.xml" target="copy-resources"/>
    <ant antfile="${antfile.dir}/build-reference.xml" target="copy-resources"/>
    <ant antfile="${antfile.dir}/build-gui.xml" target="copy-resources"/>
  </target>

  <target name="all" depends="compile"/>

</project>